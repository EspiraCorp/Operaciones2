{% extends '::baseLte.html.twig' %}

{% block title %}{{ parent() }}::Datos Catálogo{% endblock %}
{% block sectiontitle %}<h1>Catálogos<small>Datos Catálogo</small></h1>{% endblock %}
{% block breadcum %} <li><a href="{{ path('catalogo') }}"><i class="fa fa-star"></i>Catalogos</a>
	</li>
	<li class="active">Datos Catálogo</li>{% endblock %}

{% block content %}

<div class="row">
	<div class="col-md-6">
	    <div class="box box-warning">
		    <div class="box-header bg-black">
				<h3 class="box-title">Datos Catálogo</h3>
				<div class="box-tools pull-right">
					{% if is_granted('ROLE_ADMIN') or  is_granted('ROLE_DIR') or is_granted('ROLE_ASISCOMP') or is_granted('ROLE_LOGIS') or is_granted('ROLE_CAT') %}
					<a href="{{ path('catalogo_editar',  {"id": catalogo.id}) }}" title="Editar">
						<button class="btn btn-primary">
							<i class="fa fa-edit"></i>
						</button>
					</a>
					<a href="{{ path('premios_importar',  {"id": catalogo.id}) }}" title="Crear/Editar Masivo">
						<button class="btn btn-info">
							<i class="fa fa-upload"></i>
						</button>
					</a>
					<a href="{{ path('premios_importar_combos',  {"id": catalogo.id}) }}" title="Crear/Editar Combos">
						<button class="btn btn-primary">
							<i class="fa fa-th"></i>
						</button>
					</a>
		    		<a href="{{ path('premios_exportar',  {"id": catalogo.id}) }}" title="Exportar">
		    			<button class="btn btn-info">
							<i class="fa fa-download"></i>
						</button>
		    		</a>
					{% endif %}
					<a href="{{ path('premios_formatocambios',  {"id": catalogo.id}) }}" title="Exportar Cambios">
		    			<button class="btn btn-danger">
							<i class="fa fa-exchange"></i>
						</button>
					</a>
				</div>
			</div>
			<div class="box-body">
				<table class="table table-bordered table-striped table-condensed dataTable">
					<tbody>
						<tr><td>Nombre</td><td>{{ catalogo.nombre }}</td></tr>
						<tr><td>Cliente</td><td>{{ catalogo.programa.cliente.nombre }}</td></tr>
						<tr><td>Programa</td><td>{{ catalogo.programa.nombre}}</td></tr>
						<tr><td>País</td><td>{{ catalogo.pais.nombre}}</td></tr>
						<tr><td>Tipo</td><td>{{ catalogo.catalogotipo.nombre }}</td></tr>
						<tr><td>Descripcion</td><td>{{ catalogo.descripcion }}</td></tr>
						<tr><td>Valor punto</td><td>{{ catalogo.valorpunto|number_format(6, ',', '.') }}</td></tr>
						<tr><td>Fecha inicio</td><td>{{ catalogo.programa.fechainicio | date("Y-m-d") }}</td></tr>
						<tr><td>Fecha fin</td><td>{{ catalogo.programa.fechafin | date("Y-m-d") }}</td></tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<div class="col-md-6">
		<div class="row">
			{% if is_granted('ROLE_ADMIN') or is_granted('ROLE_DIR') or is_granted('ROLE_EJEC') or is_granted('ROLE_COM') or is_granted('ROLE_CLI') or is_granted('ROLE_CLIDEMO') %}
			    <div class="col-md-6">
			    	<a href="{{ path('catalogo_aprobar',  {"id": catalogo.id}) }}">	    	
			          <div class="info-box bg-red">
			            <span class="info-box-icon"><i class="fa fa-check-square-o"></i></span>

			            <div class="info-box-content">
			              <span class="info-box-text">Aprobar</span>
			              <span class="info-box-number"></span>

			              <div class="progress">
			                <div style="width: 100%" class="progress-bar"></div>
			              </div>
			                  <span class="progress-description">
			                    
			                  </span>
			            </div>
			            <!-- /.info-box-content -->
			          </div>
			          <!-- /.info-box -->
		          </a>
		        </div>
		        <!-- /.col -->
		    {% endif %}

		    {% if is_granted('ROLE_ADMIN') or  is_granted('ROLE_DIR') or is_granted('ROLE_ASISCOMP') or is_granted('ROLE_LOGIS') or is_granted('ROLE_CAT') or  is_granted('ROLE_EJEC') or  is_granted('ROLE_COM') or is_granted('ROLE_CLIDEMO') or is_granted('ROLE_CLI') %}	
		      	<div class="col-md-6">
			    	<a href="{{ path('catalogo_galeria',  {"id": catalogo.id}) }}">	    	
			          <div class="info-box bg-blue">
			            <span class="info-box-icon"><i class="fa fa-television"></i></span>

			            <div class="info-box-content">
			              <span class="info-box-text">Galeria</span>
			              <span class="info-box-number"></span>

			              <div class="progress">
			                <div style="width: 100%" class="progress-bar"></div>
			              </div>
			                  <span class="progress-description">
			                    
			                  </span>
			            </div>
			            <!-- /.info-box-content -->
			          </div>
			          <!-- /.info-box -->
		          </a>
		        </div>
		        <!-- /.col -->
	        {% endif %}

	        {% if is_granted('ROLE_CLI') and galeria==1 %}
			    <div class="col-md-6">
			    	<a href="{{ path('catalogo_galeria',  {"id": catalogo.id}) }}">	    	
			          <div class="info-box bg-yellow">
			            <span class="info-box-icon"><i class="fa fa-television"></i></span>

			            <div class="info-box-content">
			              <span class="info-box-text">Galeria</span>
			              <span class="info-box-number"></span>

			              <div class="progress">
			                <div style="width: 100%" class="progress-bar"></div>
			              </div>
			                  <span class="progress-description">
			                    
			                  </span>
			            </div>
			            <!-- /.info-box-content -->
			          </div>
			          <!-- /.info-box -->
		          </a>
		        </div>
		        <!-- /.col -->
	        {% endif %}
	    </div>

	    <div class="row">
		    {% if is_granted('ROLE_ADMIN') or  is_granted('ROLE_DIR') or is_granted('ROLE_ASISCOMP') or is_granted('ROLE_LOGIS') or is_granted('ROLE_CAT') or  is_granted('ROLE_EJEC') or  is_granted('ROLE_COM') or is_granted('ROLE_CLIDEMO') %}
			    <div class="col-md-6">
			    	<a href="{{ path('catalogo_indicadores',  {"id": catalogo.id}) }}">	    	
			          <div class="info-box bg-teal">
			            <span class="info-box-icon"><i class="fa fa-bar-chart"></i></span>

			            <div class="info-box-content">
			              <span class="info-box-text">Indicadores</span>
			              <span class="info-box-number"></span>

			              <div class="progress">
			                <div style="width: 100%" class="progress-bar"></div>
			              </div>
			                  <span class="progress-description">
			                    
			                  </span>
			            </div>
			            <!-- /.info-box-content -->
			          </div>
			          <!-- /.info-box -->
		          </a>
		        </div>
		        <!-- /.col -->
	        {% endif %}

	        {% if is_granted('ROLE_ADMIN') or  is_granted('ROLE_DIR') or is_granted('ROLE_ASISCOMP') or is_granted('ROLE_LOGIS') or is_granted('ROLE_CAT') or is_granted('ROLE_DIS') %}
			    <div class="col-md-6">
			    	<a href="{{ path('premios_imagenes',  {"catalogo": catalogo.id}) }}">	    	
			          <div class="info-box bg-purple">
			            <span class="info-box-icon"><i class="fa fa-image"></i></span>

			            <div class="info-box-content">
			              <span class="info-box-text">Imagenes</span>
			              <span class="info-box-number"></span>

			              <div class="progress">
			                <div style="width: 100%" class="progress-bar"></div>
			              </div>
			                  <span class="progress-description">
			                    
			                  </span>
			            </div>
			            <!-- /.info-box-content -->
			          </div>
			          <!-- /.info-box -->
		          </a>
		        </div>
		        <!-- /.col -->
	        {% endif %}

	        {% if is_granted('ROLE_ADMIN') or  is_granted('ROLE_DIR') or is_granted('ROLE_ASISCOMP') or is_granted('ROLE_CAT') %}
			    <div class="col-md-6">
			    	<a href="{{ path('promociones_catalogo',  {"catalogo": catalogo.id}) }}">	    	
			          <div class="info-box bg-orange">
			            <span class="info-box-icon"><i class="fa  fa-tag"></i></span>

			            <div class="info-box-content">
			              <span class="info-box-text">Promociones</span>
			              <span class="info-box-number"></span>

			              <div class="progress">
			                <div style="width: 100%" class="progress-bar"></div>
			              </div>
			                  <span class="progress-description">
			                    
			                  </span>
			            </div>
			            <!-- /.info-box-content -->
			          </div>
			          <!-- /.info-box -->
		          </a>
		        </div>
		        <!-- /.col -->
	        {% endif %}

	        {% if is_granted('ROLE_ADMIN') or  is_granted('ROLE_DIR') or is_granted('ROLE_ASISCOMP') or is_granted('ROLE_LOGIS') or is_granted('ROLE_CAT') or is_granted('ROLE_DIS') %}
			    <div class="col-md-6">
			    	<a href="{{ path('premios_listado',  {"catalogo": catalogo.id}) }}">	    	
			          <div class="info-box bg-yellow color-palette">
			            <span class="info-box-icon"><i class="fa fa-star"></i></span>

			            <div class="info-box-content">
			              <span class="info-box-text">Premios</span>
			              <span class="info-box-number"></span>

			              <div class="progress">
			                <div style="width: 100%" class="progress-bar"></div>
			              </div>
			                  <span class="progress-description">
			                    
			                  </span>
			            </div>
			            <!-- /.info-box-content -->
			          </div>
			          <!-- /.info-box -->
		          </a>
		        </div>
		        <!-- /.col -->
	        {% endif %}
	    </div>
	    
    </div>
</div>

<div class="row">
	    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_DIR') or is_granted('ROLE_ASISCOMP') or is_granted('ROLE_LOGIS') or is_granted('ROLE_CAT') or is_granted('ROLE_EJEC') or is_granted('ROLE_COM') %}
		    {% if intervalos is defined %}
		    	<div class="col-md-6">
				    <div class="box box-warning">
					    <div class="box-header bg-black">
							<h3 class="box-title">Intervalos</h3>
							<div class="box-tools pull-right">
								<a href="{{ path('catalogo_intervalos',  {"id": catalogo.id}) }}">
									<button class="btn btn-success">
										<i class="fa fa-plus"></i>
									</button>
								</a>
							</div>
						</div>
						<div class="box-body">
							<table class="table table-bordered table-striped table-condensed dataTable">
								<thead>
									<tr><th>Minimo</th><th>Maximo</th><th>Valor Punto</th></tr>
								</thead>
								<tbody>
							    	{% for intervalo in intervalos %}
							    		<tr><td >{{ intervalo.minimo|number_format(2, ',', '.') }}</td>
							    			<td align="right">{{ intervalo.maximo|number_format(2, ',', '.') }}</td>
							    			<td align="right">{{ intervalo.puntos|number_format(6, ',', '.') }}</td>
								    		<td>
								    			<a class="editar_intervalo" href="{{ path('catalogo_intervaloseditar',  {"id": intervalo.id}) }}">
													<button class="btn btn-primary btn-xs">
														<i class="fa fa-edit"></i>
													</button>
												</a>
												<a class="eliminar_intervalo" onClick="confirmar('{{ url("catalogo_intervaloseliminar", {"id": intervalo.id}) }}')">
													<button class="btn btn-danger btn-xs">
														<i class="fa fa-trash"></i>
													</button>
												</a>
											</td>
							    		</tr>
							    	{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
	    	{% endif %}
	    {% endif %}
</div>        
{% endblock %}

{% block javascript %}
	
	{{ parent() }}

	<script type="text/javascript">
  
    function confirmar(ruta)
    {
        if (confirm("Desea eliminar el intervalo.")==true){
            self.location=ruta;
        } 
     }

	$(".editar_intervalo").colorbox({href: this.href});

	</script>
	

{% endblock %}
