{% extends '::baseLte.html.twig' %}

{% block title %}{{ parent() }}::Inventario Salidas{% endblock %}
{% block sectiontitle %}<h1>Inventario<small>Salidas</small></h1>{% endblock %}
{% block breadcum %} <li><a href="{{ path('inventario_listado') }}"><i class="fa fa-star-o"></i>Inventario</a></li><li class="active">Salidas</li>{% endblock %}

{% block content %}
  <div class="row">
        <div class="col-xs-12">
          <div class="box box-warning">
            <div class="box-header bg-black">
              <h3 class="box-title">Inventario de Productos</h3> 
            </div>

            <div class="box-body no-padding">
              <div class="dataTables_wrapper form-inline dt-bootstrap">
                <div class="row">
                  <div class="col-sm-12">
                    <table class="table table-bordered table-striped table-condensed dataTable" id="productos" role="grid">
                      <form action="" method="POST" class="form-horizontal">
                        <thead>
                            <tr>
                              <th>Id</th>
                              <th>Codigo</th>
                              <th>Producto</th>
                              <th>Marca</th>
                              <th>Referencia</th>
                              <th>Sku</th>
                              <th>Fecha Entrada</th>
                              <th>OC</th>
                              <th>Observaci√≥n</th>
                              <th>Salida</th>
                            </tr>
                            <tr>
                              <th></th>
                              <th><input type="text" id="inventario_codigo" name="inventario[codigo]" style="width: 60px" class="form-control input-sm"></th>
                              <th><input type="text" id="inventario_producto" name="inventario[nombre]" style="width: 120px" class="form-control input-sm"></th>
                              <th><input type="text" id="inventario_marca" name="inventario[marca]" style="width: 60px" class="form-control input-sm"></th>
                              <th><input type="text" id="inventario_referencia" name="inventario[referencia]" style="width: 80px" class="form-control input-sm"></th>
                              <th><input type="text" id="inventario_codInc" name="inventario[codInc]" style="width: 60px" class="form-control input-sm"></th>
                              <th><input type="text" id="inventario_fechaEntrada" name="inventario[fechaEntrada]" style="width: 100px" class="form-control input-sm"></th>
                              <th><input type="text" id="inventario_ordenCompra" name="inventario[ordenCompra]" style="width: 80px" class="form-control input-sm"></th>
                              <th><input type="text" id="inventario_observacion" name="inventario[observacion]" style="width: 120px" class="form-control input-sm"></th>
                              <th><button type="submit" id="inventario_Enviar" name="inventario[Enviar]" class="btn btn-primary">Buscar</button></th>
                            </tr>
                          </thead>
                        </form>
                          <tbody>
                            {% for registro in listado %}
                            <tr>
                              <td>{{ registro['inventario']['id'] }}</td>
                              <td><a href="{{ path("inventario_salida", {"id": registro['inventario']['id'] }) }}">{{ registro['inventario']['codigo'] }}</a></td>
                              <td>{% if registro['inventario']['producto'] is not null %}{{ registro['inventario']['producto']['nombre'] }} {% endif %}</td>
                              <td>{% if registro['inventario']['producto'] is not null %}{{ registro['inventario']['producto']['marca'] }} {% endif %}</td>
                              <td>{% if registro['inventario']['producto'] is not null %}{{ registro['inventario']['producto']['referencia'] }} {% endif %}</td>
                              <td>{% if registro['inventario']['producto'] is not null %}{{ registro['inventario']['producto']['codInc'] }} {% endif %}</td>
                              <td>{{ registro['inventario']['fechaEntrada'] | date("Y-m-d") }}</td>
                              <td>{% if registro['inventario']['orden'] is not null %} {{ registro['inventario']['orden']['consecutivo'] }} {% endif %}</td>
                              <td>{{ registro['inventario']['observacion'] }}</td>
                              <td><input type="checkbox" name="id" value="{{ registro['inventario']['id'] }}"></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                      </table>
                  </div>
                </div>

                <div class="row pull-right">
                  <div class="col-sm-12">
                    <div align="pull-right">
                      <input type="submit" value="Salida" onclick='check_value("{{ path("inventario_listadosalida") }}")' class="btn btn-primary">
                      <input id="checktodos" name="checktodos" type="checkbox" />Todos
                    </div>
                  </div>
                </div>
          
                <div class="row">
                    <div class="col-sm-5"><div class="dataTables_info" role="status" aria-live="polite">Mostrando {{ listado.getItemNumberPerPage*(listado.getCurrentPageNumber-1)+1  }} a {{ listado.getItemNumberPerPage*listado.getCurrentPageNumber }} de {{ listado.getTotalItemCount }}   Productos</div></div>

                    <div class="col-sm-7"><div class="dataTables_paginate paging_simple_numbers">
                    {{ knp_pagination_render(listado) }}</div></div>
                  </div>
                </div>
          </div>
        </div>
      </div>
    </div>
{% endblock %}

{% block javascript %}

{{ parent() }}

    <script type="text/javascript">
  
      $(document).ready(function(){
       
        //Checkbox
        $("#checktodos").change(function(){
          $(':checkbox').each( function(indice, elemento) {
            if($("#checktodos").is(":checked")){
              $(this).attr("checked",true);
      	$(this).parent().addClass("checked");
            } else {
              $(this).attr("checked",false);
      	$(this).parent().removeClass("checked");
            }
          });
        });
       
      });
        
      function check_value(ruta)
      { 
        var arreglo="";
      	var chk=document.getElementsByName('id');
          for (var i = 0; i < chk.length; i++) {
              if(chk[i].checked){
                arreglo=arreglo+chk[i].value+",";
              	//self.location=ruta+"/"+chk[i].value;
              }
          }
          self.location=ruta+"/"+arreglo;
      }
  
    </script>
  
    <script type="text/javascript">
      
      function confirmar(ruta)
      {
          if (confirm("Desea cambiar el estado")==true){
              self.location=ruta;
          }else{
              alert("OK");
          }
      }
    </script>

    <script>
        $( "#inventario_fechaEntrada" ).datepicker({ dateFormat: 'yy-mm-dd' });
    </script>
    
    {{ parent() }}

{% endblock %}

